<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <title>micro, macro tasks, raf</title>
        <style>

            html, body {
                height: 100%;
                min-height: 100%;
            }

            body {
                margin: 0;
                padding: 0;
                background: linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(229, 229, 229, 1) 100%);
            }

        </style>
    </head>
    <body>

    <a id="link" href="https://learn.javascript.ru/">click me</a>

    <script>

        const link = document.getElementById('link');

        const def = new Promise( (resolve) => {
           link.addEventListener('click', resolve);
        } );

        def.then( (e) => {
           console.log('microtask')
           e.preventDefault();
        } );

       // link.click();

        console.log('end script');
    </script>

    </body>
</html>